<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Koala Mevsimi</title>

<style>
body{
margin:0;
background:linear-gradient(#020111,#000);
color:white;
font-family:Arial;
text-align:center;
min-height:100vh;
overflow:hidden;
}

h1{margin-top:90px;font-size:38px}
.alt{font-size:20px;opacity:.8;margin-bottom:40px}

.star{
position:absolute;
font-size:20px;
cursor:pointer;
color:#fff;
transition:.3s;
}
.star:hover{transform:scale(1.4)}

.visitor{color:#b26bff}

.panel{
position:fixed;
bottom:30px;
left:50%;
transform:translateX(-50%);
}

input{
padding:10px;
border-radius:12px;
border:none;
width:220px;
}

button{
padding:10px 14px;
border:none;
border-radius:12px;
cursor:pointer;
margin-left:6px;
}
</style>
</head>

<body>

<h1>Koala Mevsimi</h1>
<div class="alt">YÄ±ldÄ±zlara dokunmayÄ± unutma âœ¨</div>

<div class="panel">
<input id="visitorText" placeholder="Bir sÃ¶z bÄ±rak...">
<button onclick="addVisitor()">GÃ¶nder</button>
</div>

<script>
function createStar(text,isVisitor=false){
const s=document.createElement("div");
s.className="star"+(isVisitor?" visitor":"");
s.innerText="âœ¦";
s.style.left=Math.random()*window.innerWidth+"px";
s.style.top=Math.random()*window.innerHeight+"px";

if(text){
s.onclick=()=>{
const kalp=document.createElement("div");
kalp.innerText="ðŸ’”";
kalp.style.position="absolute";
kalp.style.left=s.style.left;
kalp.style.top=s.style.top;
kalp.style.fontSize="28px";
document.body.appendChild(kalp);
setTimeout(()=>kalp.remove(),900);
alert(text);
};
}

document.body.appendChild(s);
}

for(let i=0;i<40;i++) createStar();
</script>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, query, orderBy }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
apiKey: "AIzaSyAu4Plky_LdaPsPPwtg2y5FEplgDqnUMhA",
authDomain: "koala-mevsimi.firebaseapp.com",
projectId: "koala-mevsimi",
storageBucket: "koala-mevsimi.firebasestorage.app",
messagingSenderId: "960846201677",
appId: "1:960846201677:web:0f4126d042754a29ab6d04"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);
const ref=collection(db,"stars");

window.addVisitor=async function(){
const val=document.getElementById("visitorText").value;
if(!val) return;

await addDoc(ref,{text:val,time:Date.now()});
document.getElementById("visitorText").value="";
};

const q=query(ref,orderBy("time"));

onSnapshot(q,(snap)=>{
snap.docChanges().forEach(change=>{
if(change.type==="added"){
createStar(change.doc.data().text,true);
}
});
});
</script>

</body>
</html>
