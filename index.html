<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Koala Mevsimi</title>

<style>
body{
margin:0;
overflow:hidden;
font-family:Arial;
background:linear-gradient(#020111,#000);
color:#fff;
}

/* yÄ±ldÄ±z */
.star{
position:absolute;
font-size:13px;
cursor:pointer;
}

/* ziyaretÃ§i yÄ±ldÄ±zÄ± */
.visitor{
color:#b266ff;
}

/* sÃ¶z kutusu */
.quote{
position:absolute;
background:rgba(0,0,0,.7);
padding:8px 12px;
border-radius:10px;
font-size:14px;
pointer-events:none;
}

/* kÄ±rÄ±k kalp */
.heart{
position:absolute;
font-size:18px;
color:#ff4d6d;
animation:pop .8s forwards;
pointer-events:none;
}
@keyframes pop{
0%{transform:scale(.2);opacity:1}
100%{transform:scale(2);opacity:0}
}

/* kayan yÄ±ldÄ±z */
.shoot{
position:absolute;
width:2px;
height:2px;
background:white;
box-shadow:0 0 8px white;
animation:shoot 2s linear forwards;
}
@keyframes shoot{
0%{transform:translate(0,0)}
100%{transform:translate(400px,200px);opacity:0}
}

/* input alanÄ± */
.panel{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
}
input{
padding:8px;
border-radius:10px;
border:none;
}
button{
padding:8px 12px;
border:none;
border-radius:10px;
cursor:pointer;
}
</style>
</head>

<body>

<div class="panel">
<input id="visitorText" placeholder="Bir sÃ¶z bÄ±rak...">
<button onclick="addVisitor()">GÃ¶nder</button>
</div>

<!-- FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, query, orderBy } 
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

/* senin firebase */
const firebaseConfig = {
apiKey: "AIzaSyAu4Plky_LdaPsPPwtg2y5FEplgDqnUMhA",
authDomain: "koala-mevsimi.firebaseapp.com",
projectId: "koala-mevsimi",
storageBucket: "koala-mevsimi.firebasestorage.app",
messagingSenderId: "960846201677",
appId: "1:960846201677:web:0f4126d042754a29ab6d04"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);
const colRef = collection(db,"stars");

/* SÃ–ZLER */
const sozler=[
"Ã–zlemek, adÄ±nÄ± iÃ§imde sessizce haykÄ±rmaktÄ±r.",
"GÃ¶zlerin uzakta, ama kalbin hÃ¢lÃ¢ avuÃ§larÄ±mda gibi.",
"Hasretin, geceleri en Ã§ok konuÅŸan sessizliÄŸim oldu.",
"Sen yoksan, kalabalÄ±klar bile yalnÄ±zlÄ±ktÄ±r.",
"Mesafeler sadece bedenleri ayÄ±rÄ±r, kalpleri deÄŸil.",
"Ã–zlemek bazen bir ÅŸarkÄ±da boÄŸulmak gibidir.",
"GÃ¼lÃ¼ÅŸÃ¼nÃ¼ hatÄ±rladÄ±kÃ§a iÃ§imde bir ev yanÄ±yor.",
"Seninle susmak bile mutluluktu, sensizlik en gÃ¼rÃ¼ltÃ¼lÃ¼ acÄ±."
];

/* yÄ±ldÄ±z oluÅŸtur */
function createStar(text,visitor=false,top,left){
const star=document.createElement("div");
star.className="star"+(visitor?" visitor":"");
star.innerHTML="âœ¦";

top = top ?? Math.random()*window.innerHeight;
left = left ?? Math.random()*window.innerWidth;

star.style.top=top+"px";
star.style.left=left+"px";

star.onclick=()=>{
const q=document.createElement("div");
q.className="quote";
q.innerText=text;
q.style.top=top+20+"px";
q.style.left=left+"px";
document.body.appendChild(q);

const h=document.createElement("div");
h.className="heart";
h.innerText="ðŸ’”";
h.style.top=top+"px";
h.style.left=left+"px";
document.body.appendChild(h);

setTimeout(()=>q.remove(),2500);
setTimeout(()=>h.remove(),800);
};

document.body.appendChild(star);
return {top,left};
}

/* kendi sÃ¶zlerin */
sozler.forEach(s=>{
createStar(s);
createStar(s);
});

/* realtime ziyaretÃ§i yÄ±ldÄ±z */
onSnapshot(query(colRef,orderBy("time")), snap=>{
snap.docChanges().forEach(c=>{
if(c.type==="added"){
const d=c.doc.data();
createStar(d.text,true,d.top,d.left);
}
});
});

/* ziyaretÃ§i ekle */
window.addVisitor = async ()=>{
const val=document.getElementById("visitorText").value;
if(!val) return;

const pos=createStar(val,true);

await addDoc(colRef,{
text:val,
top:pos.top,
left:pos.left,
time:Date.now()
});

document.getElementById("visitorText").value="";
};

/* kayan yÄ±ldÄ±z */
setInterval(()=>{
const s=document.createElement("div");
s.className="shoot";
s.style.top=Math.random()*200+"px";
s.style.left="0px";
document.body.appendChild(s);
setTimeout(()=>s.remove(),2000);
},5000);

</script>
</body>
</html>
