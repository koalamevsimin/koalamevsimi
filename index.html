<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Koala Mevsimi</title>

<style>
body{
margin:0;
background:linear-gradient(#020111,#000);
color:white;
font-family:Arial;
text-align:center;
min-height:200vh;
}

/* ba≈ülƒ±k alanƒ± */
.header{
margin-top:80px;
font-size:38px;
position:relative;
z-index:5;
}

.mandalina{
cursor:pointer;
font-size:32px;
margin-left:10px;
}

.alt{margin-top:10px;font-size:20px;opacity:.8;z-index:5;position:relative}

.star{
position:absolute;
color:white;
font-size:18px;
cursor:pointer;
}

.visitor{color:#b26bff}

.popup{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%);
background:#000;
padding:18px;
border-radius:14px;
border:1px solid #444;
z-index:10;
}

.panel{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
z-index:5;
}
</style>
</head>

<body>

<div class="header">
Koala Mevsimi <span class="mandalina" onclick="mandalina()">üçä</span>
<div class="alt">yƒ±ldƒ±zlarƒ±n √ºst√ºne basmayƒ± unutma</div>
</div>

<div class="panel">
<input id="txt" placeholder="bir s√∂z bƒ±rak..." style="padding:8px;border-radius:10px;border:none">
<button onclick="addVisitor()" style="padding:8px;border-radius:10px;border:none">G√∂nder</button>
</div>

<script>
const sozler=[
"√ñzlemek, adƒ±nƒ± i√ßimde sessizce haykƒ±rmaktƒ±r.",
"Sen yoksan kalabalƒ±klar bile yalnƒ±z.",
"Sesini unutmadƒ±m ama artƒ±k duymaya hakkƒ±m yok.",
"Kalbim senden vazge√ßmedi sadece yoruldu."
];

function kalp(x,y){
const k=document.createElement("div");
k.innerText="üíî";
k.style.position="absolute";
k.style.left=x;
k.style.top=y;
k.style.fontSize="26px";
document.body.appendChild(k);
setTimeout(()=>k.remove(),900);
}

function star(text,isVisitor=false){
const s=document.createElement("div");
s.className="star"+(isVisitor?" visitor":"");
s.innerText="‚ú¶";

/* √ºstte yazƒ± alanƒ±na yƒ±ldƒ±z gelmesin */
s.style.left=Math.random()*window.innerWidth+"px";
s.style.top=(150+Math.random()*(document.body.scrollHeight-150))+"px";

s.onclick=()=>{
kalp(s.style.left,s.style.top);
const p=document.createElement("div");
p.className="popup";
p.innerText=text || sozler[Math.floor(Math.random()*sozler.length)];
document.body.appendChild(p);
setTimeout(()=>p.remove(),2600);
};

document.body.appendChild(s);
}

/* sabit yƒ±ldƒ±zlar */
for(let i=0;i<80;i++) star();

function mandalina(){
const p=document.createElement("div");
p.className="popup";
p.innerText="Kalbim senden vazge√ßmedi‚Ä¶ sadece dayanacak g√ºc√º kalmadƒ±.";
document.body.appendChild(p);
setTimeout(()=>p.remove(),2800);
}
</script>

<!-- üî• FIREBASE -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, query, orderBy }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig = {
apiKey:"AIzaSyAu4Plky_LdaPsPPwtg2y5FEplgDqnUMhA",
authDomain:"koala-mevsimi.firebaseapp.com",
projectId:"koala-mevsimi",
storageBucket:"koala-mevsimi.firebasestorage.app",
messagingSenderId:"960846201677",
appId:"1:960846201677:web:0f4126d042754a29ab6d04"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);
const ref=collection(db,"sozler");

window.addVisitor=async function(){
const val=document.getElementById("txt").value;
if(!val) return;
await addDoc(ref,{text:val,time:Date.now()});
document.getElementById("txt").value="";
};

const q=query(ref,orderBy("time"));
onSnapshot(q,(snap)=>{
snap.docChanges().forEach(c=>{
if(c.type==="added") star(c.doc.data().text,true);
});
});
</script>

</body><script type="module">
import { doc, getDoc, setDoc, updateDoc, increment }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const sayacRef = doc(db,"sayac","ziyaret");

/* saya√ß kutusu olu≈ütur */
const sayi=document.createElement("div");
sayi.style.position="fixed";
sayi.style.top="10px";
sayi.style.right="15px";
sayi.style.fontSize="14px";
sayi.style.opacity=".7";
sayi.style.zIndex="20";
document.body.appendChild(sayi);

/* saya√ß i≈ülemi */
async function sayac(){
const snap=await getDoc(sayacRef);

if(!snap.exists()){
await setDoc(sayacRef,{count:1});
sayi.innerText="‚ú® 1 ki≈üi bu sayfaya dokundu";
}
else{
await updateDoc(sayacRef,{count:increment(1)});
const yeni=(await getDoc(sayacRef)).data().count;
sayi.innerText="‚ú® "+yeni+" ki≈üi bu sayfaya dokundu";
}
}
sayac();
</script>
</html>

