<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Koala Mevsimi</title>

<style>
body{
margin:0;
background:linear-gradient(#020111,#000);
color:white;
font-family:Arial;
text-align:center;
min-height:200vh;
}

/* baÅŸlÄ±k */
.header{margin-top:80px;font-size:38px;z-index:5;position:relative}
.mandalina{cursor:pointer;font-size:32px;margin-left:10px}
.alt{margin-top:10px;font-size:20px;opacity:.8}

/* yÄ±ldÄ±z */
.star{position:absolute;color:white;font-size:18px;cursor:pointer}
.visitor{color:#b26bff}

/* popup */
.popup{
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%);
background:#000;
padding:18px;
border-radius:14px;
border:1px solid #444;
z-index:10;
}

/* sÃ¶z panel */
.panel{
position:fixed;
bottom:20px;
left:50%;
transform:translateX(-50%);
z-index:5;
}
</style>
</head>

<body>

<div class="header">
Koala Mevsimi <span class="mandalina" onclick="mandalina()">ğŸŠ</span>
<div class="alt">yÄ±ldÄ±zlarÄ±n Ã¼stÃ¼ne basmayÄ± unutma</div>
</div>

<div class="panel">
<input id="txt" placeholder="bir sÃ¶z bÄ±rak..." style="padding:8px;border-radius:10px;border:none">
<button onclick="addVisitor()" style="padding:8px;border-radius:10px;border:none">GÃ¶nder</button>
</div>

<script>
const sozler=[
"Ã–zlemek, adÄ±nÄ± iÃ§imde sessizce haykÄ±rmaktÄ±r.",
"Sen yoksan kalabalÄ±klar bile yalnÄ±z.",
"Sesini unutmadÄ±m ama artÄ±k duymaya hakkÄ±m yok.",
"Kalbim senden vazgeÃ§medi sadece yoruldu."
];

function kalp(x,y){
const k=document.createElement("div");
k.innerText="ğŸ’”";
k.style.position="absolute";
k.style.left=x;
k.style.top=y;
k.style.fontSize="26px";
document.body.appendChild(k);
setTimeout(()=>k.remove(),900);
}

function star(text,isVisitor=false){
const s=document.createElement("div");
s.className="star"+(isVisitor?" visitor":"");
s.innerText="âœ¦";

s.style.left=Math.random()*window.innerWidth+"px";
s.style.top=(150+Math.random()*(document.body.scrollHeight-150))+"px";

s.onclick=()=>{
kalp(s.style.left,s.style.top);
const p=document.createElement("div");
p.className="popup";
p.innerText=text || sozler[Math.floor(Math.random()*sozler.length)];
document.body.appendChild(p);
setTimeout(()=>p.remove(),2600);
};

document.body.appendChild(s);
}

for(let i=0;i<80;i++) star();

function mandalina(){
const p=document.createElement("div");
p.className="popup";
p.innerText="Kalbim senden vazgeÃ§mediâ€¦ sadece dayanacak gÃ¼cÃ¼ kalmadÄ±.";
document.body.appendChild(p);
setTimeout(()=>p.remove(),2800);
}
</script>

<!-- ğŸ”¥ FIREBASE + ZÄ°YARETÃ‡Ä° SÃ–ZLER + SAYAC -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
import { getFirestore, collection, addDoc, onSnapshot, query, orderBy,
doc, getDoc, setDoc, updateDoc, increment }
from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

const firebaseConfig={
apiKey:"AIzaSyAu4Plky_LdaPsPPwtg2y5FEplgDqnUMhA",
authDomain:"koala-mevsimi.firebaseapp.com",
projectId:"koala-mevsimi",
storageBucket:"koala-mevsimi.firebasestorage.app",
messagingSenderId:"960846201677",
appId:"1:960846201677:web:0f4126d042754a29ab6d04"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

/* ziyaretÃ§i sÃ¶zler */
const ref=collection(db,"sozler");

window.addVisitor=async function(){
const val=document.getElementById("txt").value;
if(!val) return;
await addDoc(ref,{text:val,time:Date.now()});
document.getElementById("txt").value="";
};

const q=query(ref,orderBy("time"));
onSnapshot(q,(snap)=>{
snap.docChanges().forEach(c=>{
if(c.type==="added") star(c.doc.data().text,true);
});
});

/* â­ ziyaretÃ§i sayacÄ± */
const sayacRef=doc(db,"sayac","ziyaret");

const sayi=document.createElement("div");
sayi.style.position="fixed";
sayi.style.top="10px";
sayi.style.right="15px";
sayi.style.fontSize="14px";
sayi.style.opacity=".7";
sayi.style.zIndex="20";
document.body.appendChild(sayi);

async function sayac(){
const snap=await getDoc(sayacRef);

if(!snap.exists()){
await setDoc(sayacRef,{count:1});
sayi.innerText="âœ¨ 1 kiÅŸi bu sayfaya dokundu";
}
else{
await updateDoc(sayacRef,{count:increment(1)});
const yeni=(await getDoc(sayacRef)).data().count;
sayi.innerText="âœ¨ "+yeni+" kiÅŸi bu sayfaya dokundu";
}
}
sayac();
</script>

</body>
</html>
